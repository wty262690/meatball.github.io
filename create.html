<!DOCTYPE html>
<html lang="en">
	<head >
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Meatball Portfolio</title>
	<link rel="apple-touch-icon" sizes="180x180" href="image/favicon_io/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="image/favicon_io/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="image/favicon_io/favicon-16x16.png">
    <link href="css/create.css" rel="stylesheet" type="text/css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script defer src=https://Unpkg.com/processing-js></script>	
	<script>
		const ComicTitle = [
				{
					name : 'floor1',
					link : ["https://i.imgur.com/KaM7t5T.png","https://i.imgur.com/eM14Rdf.png","https://i.imgur.com/pS6xU5a.png","https://i.imgur.com/SQz5axx.png","https://i.imgur.com/xwZbSm8.png","https://i.imgur.com/djQyGDh.png","https://i.imgur.com/iF26szu.png","https://i.imgur.com/71YzKnb.png","https://i.imgur.com/4NXiBHx.png","https://i.imgur.com/cxPjTmM.png","https://i.imgur.com/mLJ5stg.png","https://i.imgur.com/Awh06HI.png","https://i.imgur.com/iFHqnmT.png","https://i.imgur.com/zoRRhj1.png","https://i.imgur.com/wzKivfl.png","https://i.imgur.com/EDOYf1C.png","https://i.imgur.com/HI49GfA.png","https://i.imgur.com/nl6hl5j.png","https://i.imgur.com/3KOewtD.png","https://i.imgur.com/W1kuQl6.png","https://i.imgur.com/eno3nOx.png","https://i.imgur.com/afXOBmJ.png","https://i.imgur.com/Pbju3SG.png","https://i.imgur.com/Cjtoo29.png","https://i.imgur.com/4qVNbH1.png","https://i.imgur.com/YLrFLGX.png","https://i.imgur.com/wbi3RDe.png","https://i.imgur.com/4GPDCHu.png","https://i.imgur.com/q6llicV.png","https://i.imgur.com/quh0ITF.png","https://i.imgur.com/OMPFEhO.png","https://i.imgur.com/5NRxyqT.png","https://i.imgur.com/Mw6d7rJ.png","https://i.imgur.com/VCKHesn.png"],
					displaysize : 0.85,
					size : 1.77788127699,
				},
				{
					name : 'floor2',
					link : ["https://i.imgur.com/h9YQmWm.png","https://i.imgur.com/O17tTsj.png","https://i.imgur.com/gKMxSv3.png","https://i.imgur.com/MX2quQu.png","https://i.imgur.com/cmk0clJ.png","https://i.imgur.com/CtNodGk.png","https://i.imgur.com/2uALXaf.png","https://i.imgur.com/2USGjCa.png","https://i.imgur.com/1Ys01kW.png","https://i.imgur.com/OeMrjSx.png","https://i.imgur.com/ExZuQFv.png","https://i.imgur.com/VZ8etg6.png","https://i.imgur.com/2pa9wNH.png","https://i.imgur.com/UV2CDrb.png","https://i.imgur.com/y5c6tHX.png","https://i.imgur.com/vDHLyOX.png","https://i.imgur.com/DxlxVMJ.png","https://i.imgur.com/cqgmouS.png","https://i.imgur.com/N54QNTD.png","https://i.imgur.com/WI7VXy1.png","https://i.imgur.com/Dkx9baf.png"],
					displaysize : 0.7,
					size : 1.16517285531,
				},
			];
			const Imagebar = [
			];

			function comicsize(){
			var comic=document.getElementsByClassName("comic");
			var fistpage=document.getElementsByClassName("firstpage");
			const element = document.querySelector('.block')
			for (var i = 0, length = comic.length; i < length; i++){
				var commicwidth = self.innerWidth * element.style.width.split('vw')[0] /100;
				var t=commicwidth/ComicTitle[i].size*ComicTitle[i].displaysize+"px";
				comic[i].style.height=t;
				console.log(i, t);
				var display=document.getElementById("floor"+(i+1)+"display");
				display.style.height=t;
			}
		}

		function comicpage(array){
			var comic=document.getElementById(array.name);
			for(var i=0, length=array.link.length; i<length; i++){
			comic.innerHTML+="<img src='"+array.link[i]+"' class='artwork' alt='comic pages' referrerpolicy='no-referrer'/>";
			}
		}
		function imagebar(array){
			var image=document.getElementById(array.name);
			for(var i=0, length=array.link.length; i<length; i++){
			image.innerHTML+="<img src='"+array.link[i]+"' class='artwork' alt='images in image bar' referrerpolicy='no-referrer'/>";
			}
		}

		function windowsize(){
			console.log("is here");
			if ($(window).width()*(90/100)<=1000){
				if ($("input[name='menu-open']")[0].checked==true || $("input[name='menu-open']")[1].checked==true ){
					$(".block").css("width","65vw");
				}
				else{	
					$(".block").css("width","85vw");
				}
			}
			else{
				if ($("input[name='menu-open']")[0].checked==true || $("input[name='menu-open']")[1].checked==true ){
					$(".block").css("width","75vw");
				}
				else{
					$(".block").css("width","85vw");
				}
			}
			comicsize();
		}

		window.onload=function(){
			$('.menu').load('menu.html');
			windowsize();
			for (var i=0, length=ComicTitle.length; i<length; i++){
				comicpage(ComicTitle[i]);
			}
			for (var i=0, length=Imagebar.length; i<length; i++){
				comicpage(Imagebar[i]);
			}
		}

		$(window).resize(function(){
			windowsize();
		});
	</script>
	<script>
		var tag = document.createElement('script');
		tag.src = "https://www.youtube.com/iframe_api";
		var firstScriptTag = document.getElementsByTagName('script')[0];
		firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

		var player = [];
		var list = ['MDcvo3Y63ZM','K3UH0omlYas','sACBsbbM3CI']
		function onYouTubeIframeAPIReady() {
			var video = document.getElementsByClassName('video');
			for (var i =0; i < video.length; i++){
				player[i] = new YT.Player('video'+i, {
				videoId: list[i],
				playerVars: {
					'playsinline': 1
				},
				events: {
					'onReady': onPlayerReady,
					'onStateChange': onPlayerStateChange
				}
				});
			}
		}
		function onPlayerReady(event) {}
		function onPlayerStateChange(event) {}
		function controlVideo(vidFunc, index) {
			switch (index){
				case -1 : {
					document.getElementById('floor2-video1').checked = false;
					document.getElementById('floor2-video2').checked = false;
					player[1].pauseVideo();
					player[2].pauseVideo();
					break;
				}
				case 1 : {
					player[1].pauseVideo();
					player[2].pauseVideo();
					document.getElementById('floor2-video2').checked = false;
					break;
				}
				case 2 : {
					player[1].pauseVideo();
					player[2].pauseVideo();
					document.getElementById('floor2-video1').checked = false;
					break;
				}
				default : {
					player[index].pauseVideo();
				}
			}
		}
	</script>

	<script>
		$(document).ready(function(){
			comicsize();
			$("input[name='int']").each(function(){
				this.onclick=function(){
					if(this.checked) {
						var file = new XMLHttpRequest();
                        file.open("GET", "word/"+this.value+".txt");
						var idname=this.value+"-fileOutput";
                        file.onreadystatechange = function() {
                            if (file.readyState === 4) {
                                var allText = file.responseText;
                                document.getElementById(idname).innerHTML = "<br>"+allText;
                                }
                            }
                        file.send(null);
					}
				}
			});
		});

	</script>

	</script>
	</head>
	<body>
		<nav class="menu nocopy">
		</nav>

	<nav class="nocopy list">
		<input type="radio" class="list-open" name="menu-open" id="list-open" checked="checked" />
		<label for="list-open">
			<span class="list-open-button list-button" id="list-open-button"></span>
		</label>
		<div class="story-list title" >
			<label class="story-open-button">
				<input type="radio" class="list-open" name="story-open" />
				<span>我</span>
                    <hr>
					<input type="radio" class="story-open sub-story-open" name="digital-painting" />
					<span>親愛的，這個當興趣就好</span>
					<input type="radio" class="story-open sub-story-open" name="digital-painting" />
					<span>Outside the Window</span>
			</label>
			<div class="list-br"></div>
			<label class="story-open-button">	
				<input type="radio" class="story-open" name="story-open" />
				<span>關不掉的鬧鐘</span>
			</label>
            <div class="list-br"></div>
		</div>
	</nav>


		<!---<div class="content">--->
			<div class="block">
				<div class="workcover centerparent-grid">
				<div class= "workcover-title">
					<div class ="subtitle">我 系列</div>
					<div class = "subsubtitle">2021 - 2022</div>
				</div>
				</div>
				
			</div>
			<!--***********漫畫***********-->
			<div class="towhite"></div>
			<div class="white">
				<div class="floor1 block">
					<div class="title-block">
						<p class="subtitle">I</p>
						<p class="title"> 親愛的，這個當興趣就好</p>
					</div>
					<div class="withint" id="floor1display">
						<input type="checkbox" name="floor1-video" id="floor1-video" onClick="controlVideo('pauseVideo',0);">
						<label for="floor1-video" class="video-button"></label>
						<div class = "video" id = "video0"></div>
						
						<div class="comic" id="floor1">
							<img src="https://i.imgur.com/sG0GStX.jpg" class="artwork firstpage" alt='comic pages' referrerpolicy="no-referrer"/>
						</div>
						
						<input type="checkbox" name="int" id="int" value="floor1">
						<label for="int" class="int-button"></label>
						<div class="int-block"><div class="int" id="floor1-fileOutput"></div></div>
					</div>
					<div class="line"></div>
				</div>

				<div class="floor2 block">
					<p class="title"> II</p>
					<p class="title sub-title">Outside the Window</p>
					<div id="floor2display">
						<img src="https://i.imgur.com/K5Y9NKc.png" class="artwork" id="comic-bird" alt='illustration' referrerpolicy="no-referrer"/>
						<div class="comic" id="floor2">
							<img src="https://i.imgur.com/9ZCRmWz.png" class="artwork firstpage" alt='comic pages' referrerpolicy="no-referrer"/>
						</div>
						<input type="checkbox" name="floor2" id="floor2-program" onClick="controlVideo('pauseVideo',-1);">
						<label for="floor2-program" class="program-button"></label>
						
						<input type="checkbox" name="floor2" id="floor2-video1" onClick="controlVideo('pauseVideo',1);">
						<label for="floor2-video1" class="video-button"></label>
						<div class = "video" id = "video1"></div>
						
						<input type="checkbox" name="floor2" id="floor2-video2" onClick="controlVideo('pauseVideo',2);">
						<label for="floor2-video2" class="video-button"></label>
						<div class = "video" id = "video2"></div>
						
					</div>
				</div>
			</div>
            <div class="whitego"></div>
        <!---</div>--->
    </body>