<!DOCTYPE html>
<html lang="en">
	<head >
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="apple-touch-icon" sizes="180x180" href="../image/favicon_io/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="../image/favicon_io/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="../image/favicon_io/favicon-16x16.png">
	<title>Taiwan</title>
    <link href="./css/main.css" rel="stylesheet" type="text/css">
    <link href="./css/work1.css" rel="stylesheet" type="text/css">
	<link href="./css/loading.css" rel="stylesheet" type="text/css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script>
		var width, height, genheight ;
		var wordline = 1
		var drawspeed = 2, genspeed = 60;
		var drawposition = -drawspeed, genposition = 0;
		var alltext="", alltextline="", inputtext="";
		var keyword = "Taiwan";
		var imagepath = "./image/image";
		var img;
		my_function = null;
		var genindex=0, numofgen = 0;
		var istyping = false;
		function MoveDrawPosition(){
			drawposition -= drawspeed;
			document.getElementById("draw").style['background-position-y'] = drawposition + "px";
		}

		window.onload=function(){
			width = window.innerWidth;
			height = window.innerHeight;
			genheight = width*(58/100);
			genposition = genheight;
			readTextFile(keyword);
			numofgen = Math.floor((height / genheight )) +2; 
			genindex = numofgen;
			creategenchild()
			workstart()
			document.getElementById("contentbody").addEventListener("wheel", zoom, { passive: false });
		}

		var onresize = function(e) {
			width = window.innerWidth;
			height = window.innerHeight;
			genheight = width*58/100;
		}
		window.addEventListener("resize", onresize);
		
		function creategenchild(){
			document.getElementById("generate").innerHTML = ""
			for (i = 0; i < numofgen; i++) {
				document.getElementById("generate").innerHTML += "<div class= 'generate gen-img child' id='gen-img"+i+"'> </div>";
			}
			//setgenposition()
			setimagegenchild()
		}

		function addgenchild(){	
			genindex = genindex+1;
			document.getElementById("generate").innerHTML += "<div class= 'generate gen-img child' id='gen-img"+i+"'> </div>";
			setimagegenchild()
		}
		
		function setimagegenchild(){
			gen = document.getElementsByClassName("gen-img")
			var i = 0;
			Array.from(gen).forEach((img) => {
				img.style['background-image'] = "url(./image/gen_"+keyword+"/"+(((i)% 30)+1)+".jpg)";
				i++;
			})
		}

		$().ready(function(){
			$('#loading').load('loading.html');
			my_function = function(genposition )
			{
				$('#generate').animate({
					scrollTop: genposition
					}, genspeed * 1000, 'linear');
			}
			console.log("ready");
		})

		function setgenposition(){
			gen = document.getElementsByClassName("gen-img")
			addgenchild()
			my_function(genposition);
			genposition += genheight;
		}

		var istop = true;
		function zoom(event) {
			event.preventDefault();
			console.log(event.deltaY, istop)
			if(!istop && event.deltaY<-10)  {
				console.log("to top"); 
				window.scrollTo({
					top: 0,
					behavior: "smooth",
				});
				istop = !istop;
			}
			if(istop && event.deltaY>10){ 
				console.log("to bottom"); 
				window.scrollTo({
					top: document.body.scrollHeight,
					behavior: "smooth",
				});
				istop = !istop;
			}
		}

</script>
	<script src="./js/loading.js"></script>
	<script src="./js/main.js"></script>
	</head>
	<body>
	<!---<div id = "loading">
		<div class = "centerparent" id = "divloading">
			<div class = "title" id = "loadingtitle"></div>
			<div class = "smalltitle" id = "loadingsmalltitle">humanâ€“computer interaction</div>
			<div class = "line" id = "line"></div>
		</div>
	</div>--->
	<nav class = "loading" id = "loading"></nav>
	
	<div id = "contentbody">
		<div class = "title centerparent" id = "divtitle">
			<div class = "title" id = "title">#1<div class = "smalltitle" id = "smalltitle">Taiwan</div></div>
			<div class = "line"></div>
		</div>
	<div class="draw" id="draw"></div>
	
    <div class="word" id="Taiwan">
		<div class="word child" id="Taiwan-image"><div class="word child" id="promtimg"></div></div>
		<div class="word child" id="Taiwan-word"></div>
    </div>

	<div class="generate" id="generate"></div>
	</div>
    </body>